<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Automation Demystified — The Hidden Engine</title>
<style>
  :root{
    --bg:#f8fafc;--panel:#ffffff;--ink:#1e293b;--muted:#64748b;--accent:#3b82f6;
    --success:#10b981;--warn:#f59e0b;--danger:#ef4444;--line:#e2e8f0;
    --gear:#6366f1;--energy:#8b5cf6;--light-accent:#dbeafe;--shadow:rgba(0,0,0,0.1);
  }
  *{box-sizing:border-box}
  body{
    margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    background:linear-gradient(135deg,#f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
    color:var(--ink);min-height:100vh;
  }
  
  /* Header */
  header{
    position:sticky;top:0;
    background:linear-gradient(135deg,rgba(255,255,255,0.95),rgba(248,250,252,0.95));
    backdrop-filter:saturate(140%) blur(12px);
    border-bottom:2px solid var(--line);z-index:10;
    box-shadow:0 4px 20px var(--shadow);
  }
  .wrap{max-width:1400px;margin:0 auto;padding:20px}
  h1{
    font-size:28px;margin:0;
    background:linear-gradient(135deg,#3b82f6,#6366f1,#8b5cf6);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    background-clip:text;font-weight:700;
  }
  .sub{color:var(--muted);font-size:16px;margin-top:8px;line-height:1.5;}
  
  main{padding:24px}
  .panel{
    background:var(--panel);border:2px solid var(--line);border-radius:16px;padding:24px;
    box-shadow:0 8px 32px var(--shadow);margin-bottom:24px;
  }
  
  /* Form Layout - Separated Personal vs Company Information */
  .form-sections{
    display:grid;grid-template-columns:1fr 1fr;gap:32px;margin-bottom:24px;
  }
  .form-section{
    background:var(--panel);border:2px solid var(--line);border-radius:16px;padding:20px;
    box-shadow:0 4px 16px var(--shadow);
  }
  .section-title{
    font-size:16px;font-weight:700;color:var(--accent);margin:0 0 16px 0;
    padding-bottom:8px;border-bottom:2px solid var(--line);
  }
  .form-grid{
    display:grid;gap:16px;
  }
  .form-row{
    display:grid;grid-template-columns:1fr 1fr;gap:12px;
  }
  
  label{
    font-size:13px;color:var(--muted);font-weight:600;text-transform:uppercase;
    letter-spacing:0.5px;margin-bottom:4px;display:block;
  }
  input, select{
    width:100%;padding:12px 14px;border-radius:10px;border:2px solid var(--line);
    background:var(--panel);color:var(--ink);transition:all 0.2s ease;
    font-size:14px;
  }
  input:focus, select:focus{
    outline:none;border-color:var(--accent);
    box-shadow:0 0 0 3px rgba(59,130,246,0.1);
  }
  
  /* Service Details Section - Full Width */
  .service-section{
    background:var(--panel);border:2px solid var(--line);border-radius:16px;padding:20px;
    box-shadow:0 4px 16px var(--shadow);margin-bottom:24px;
  }
  .service-grid{
    display:grid;grid-template-columns:repeat(4, 1fr);gap:16px;
  }
  .address-section{
    grid-column:span 4;margin-top:16px;
  }
  
  /* Buttons */
  button.primary{
    background:linear-gradient(135deg,var(--accent),#6366f1);
    border:2px solid var(--accent);color:white;padding:12px 18px;
    border-radius:10px;font-weight:600;cursor:pointer;
    transition:all 0.2s ease;box-shadow:0 4px 12px rgba(59,130,246,0.3);
  }
  button.primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(59,130,246,0.4);}
  
  button.secondary{
    background:var(--panel);border:2px solid var(--line);color:var(--ink);
    padding:12px 18px;border-radius:10px;cursor:pointer;transition:all 0.2s ease;
    font-weight:600;
  }
  button.secondary:hover{
    border-color:var(--accent);background:var(--light-accent);
    transform:translateY(-1px);
  }
  
  button.stop{
    background:linear-gradient(135deg,#ef4444,#dc2626);
    border:2px solid #ef4444;color:white;padding:8px 14px;
    border-radius:8px;font-weight:600;cursor:pointer;
    transition:all 0.2s ease;box-shadow:0 4px 12px rgba(239,68,68,0.3);
    font-size:13px;
  }
  button.stop:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(239,68,68,0.4);}
  
  /* Engine Area Layout - Matching Widths */
  .engine-area{
    display:grid;grid-template-columns:400px 1fr;gap:24px;min-height:500px;
  }
  
  /* Engine Section with Buttons on Left */
  .engine-section{
    display:flex;flex-direction:column;gap:16px;
  }
  .engine-controls{
    display:flex;flex-direction:column;gap:8px;
  }
  
  /* Interlocked Gears */
  #gearEngine{
    width:100%;height:400px;border:2px solid var(--line);border-radius:16px;
    background:linear-gradient(135deg,#ffffff,#f8fafc);
    box-shadow:inset 0 2px 8px rgba(0,0,0,0.05);position:relative;
  }
  
  /* Work Products Section */
  .products-section{
    display:flex;flex-direction:column;
  }
  .products-title{
    margin:0 0 16px 0;color:var(--accent);font-size:20px;font-weight:700;
  }
  
  /* Status Messages */
  .status-message{
    background:linear-gradient(135deg,#f0f9ff,#e0f2fe);
    color:#0369a1;border:1px solid #0ea5e9;border-radius:8px;
    padding:12px 16px;margin-bottom:16px;text-align:center;
    font-weight:500;font-size:14px;
    box-shadow:0 2px 8px rgba(14,165,233,0.1);
    transition:all 0.3s ease;
  }
  
  .status-message.working{
    background:linear-gradient(135deg,#fef3c7,#fffbeb);
    color:#d97706;border-color:#f59e0b;
    animation:pulse 2s ease-in-out infinite;
  }
  
  @keyframes pulse{
    0%, 100%{opacity:1;}
    50%{opacity:0.7;}
  }
  
  /* Artifact Display Area */
  .artifact-area{
    display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));
    gap:16px;padding:20px;border:2px solid var(--line);border-radius:16px;
    background:var(--panel);box-shadow:0 4px 12px var(--shadow);
    align-content:start;position:relative;min-height:300px;
  }
  
  /* Artifact Pills - NO ANIMATIONS */
  .artifact-pill{
    padding:20px;border:2px solid var(--line);border-radius:16px;
    background:var(--panel);cursor:pointer;transition:transform 0.2s ease;
    text-align:center;min-height:120px;display:flex;flex-direction:column;
    justify-content:center;align-items:center;position:relative;
    box-shadow:0 2px 8px var(--shadow);
    opacity:0.3;transform:scale(0.95);
  }
  
  /* When revealed - simple, clean appearance */
  .artifact-pill.revealed{
    opacity:1;transform:scale(1);
  }
  
  .artifact-pill:hover{
    transform:scale(1.05);box-shadow:0 8px 24px var(--shadow);
  }
  
  .artifact-pill .icon{
    font-size:32px;margin-bottom:8px;
  }
  
  .artifact-pill .title{
    font-weight:700;font-size:14px;margin-bottom:4px;
  }
  
  .artifact-pill .desc{
    font-size:11px;color:var(--muted);line-height:1.3;
  }
  
  /* Thematic colors for different artifacts */
  .artifact-email{border-color:#3b82f6;background:linear-gradient(135deg,#dbeafe,#f0f9ff);}
  .artifact-email .title{color:#1d4ed8;}
  
  .artifact-sms{border-color:#10b981;background:linear-gradient(135deg,#d1fae5,#ecfdf5);}
  .artifact-sms .title{color:#047857;}
  
  .artifact-invoice{border-color:#f59e0b;background:linear-gradient(135deg,#fef3c7,#fffbeb);}
  .artifact-invoice .title{color:#d97706;}
  
  .artifact-crm{border-color:#8b5cf6;background:linear-gradient(135deg,#ede9fe,#f5f3ff);}
  .artifact-crm .title{color:#7c3aed;}
  
  .artifact-slack{border-color:#06b6d4;background:linear-gradient(135deg,#cffafe,#f0fdfa);}
  .artifact-slack .title{color:#0891b2;}
  
  .artifact-response{border-color:#ec4899;background:linear-gradient(135deg,#fce7f3,#fdf2f8);}
  .artifact-response .title{color:#db2777;}
  
  .artifact-report{border-color:#ef4444;background:linear-gradient(135deg,#fee2e2,#fef2f2);}
  .artifact-report .title{color:#dc2626;}
  
  /* Gear animations - slow and steady */
  .gear{
    transform-origin:center;
  }
  .gear.spinning{
    animation:gearRotate 30s linear infinite;
  }
  .gear.spinning.reverse{
    animation:gearRotateReverse 30s linear infinite;
  }
  
  @keyframes gearRotate{
    from{transform:rotate(0deg);}
    to{transform:rotate(360deg);}
  }
  @keyframes gearRotateReverse{
    from{transform:rotate(0deg);}
    to{transform:rotate(-360deg);}
  }
  
  /* Modal */
  .modal{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;
    background:rgba(0,0,0,0.5);z-index:100;backdrop-filter:blur(4px);
  }
  .modal.active{display:flex}
  
  /* Empowerment Modal - Transparent overlay during gear animation */
  .empowerment-modal{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;
    background:rgba(59,130,246,0.15);z-index:50;backdrop-filter:blur(2px);
    transition:all 0.8s ease;
  }
  .empowerment-modal.active{display:flex}
  .empowerment-modal.fade-in{opacity:1;}
  .empowerment-modal.fade-out{opacity:0;}
  
  .empowerment-content{
    background:linear-gradient(135deg,rgba(255,255,255,0.95),rgba(248,250,252,0.9));
    border:3px solid rgba(59,130,246,0.6);border-radius:20px;
    padding:40px 50px;max-width:700px;text-align:center;
    box-shadow:0 20px 60px rgba(59,130,246,0.3);
    backdrop-filter:saturate(140%) blur(8px);
    animation:empowermentSlideIn 0.8s ease;
  }
  
  @keyframes empowermentSlideIn{
    from{opacity:0;transform:translateY(-30px) scale(0.9);}
    to{opacity:1;transform:translateY(0) scale(1);}
  }
  
  .empowerment-title{
    font-size:28px;font-weight:800;color:#1d4ed8;margin:0 0 20px 0;
    text-shadow:0 2px 4px rgba(59,130,246,0.2);
    background:linear-gradient(135deg,#1d4ed8,#3b82f6,#6366f1);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    background-clip:text;
  }
  
  .empowerment-message{
    font-size:18px;line-height:1.6;color:#1e293b;margin:0;
    font-weight:500;
  }
  
  .empowerment-highlight{
    font-size:20px;font-weight:700;color:#059669;
    margin:16px 0;padding:12px 20px;
    background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(5,150,105,0.05));
    border-radius:12px;border:2px solid rgba(16,185,129,0.3);
  }
  .modal-content{
    width:min(900px,90vw);max-height:85vh;overflow:auto;
    background:var(--panel);border:2px solid var(--line);border-radius:16px;
    box-shadow:0 20px 60px rgba(0,0,0,0.3);animation:modalSlideIn 0.3s ease;
    position:relative;
  }
  @keyframes modalSlideIn{
    from{opacity:0;transform:translateY(-20px) scale(0.95);}
    to{opacity:1;transform:translateY(0) scale(1);}
  }
  .modal-header{
    padding:20px 24px;border-bottom:2px solid var(--line);
    background:var(--light-accent);position:relative;
  }
  .modal-header h3{margin:0;font-size:20px;color:var(--accent);font-weight:700;}
  .modal-body{padding:24px}
  .modal-close{
    position:absolute;top:16px;right:16px;width:40px;height:40px;
    border-radius:10px;background:var(--panel);border:2px solid var(--line);
    color:var(--ink);font-weight:bold;cursor:pointer;
    display:flex;align-items:center;justify-content:center;
    font-size:18px;transition:all 0.2s ease;
  }
  .modal-close:hover{
    background:var(--danger);color:white;border-color:var(--danger);
    transform:scale(1.1);
  }
  
  /* Educational content styling */
  .education-section{
    background:linear-gradient(135deg,#f0f9ff,#e0f2fe);
    border:2px solid #0ea5e9;border-radius:12px;padding:20px;margin-top:20px;
    box-shadow:0 4px 12px rgba(14,165,233,0.2);
  }
  .education-section h4{
    margin:0 0 12px 0;color:#0369a1;font-size:18px;font-weight:700;
    display:flex;align-items:center;gap:8px;
  }
  .education-section p{
    margin:0 0 12px 0;color:#0c4a6e;line-height:1.6;
  }
  .education-section .value-points{
    background:rgba(255,255,255,0.7);padding:16px;border-radius:8px;
    border-left:4px solid #0ea5e9;
  }
  .education-section .value-points ul{
    margin:0;padding-left:20px;
  }
  .education-section .value-points li{
    margin-bottom:8px;color:#0c4a6e;
  }
  
  /* Interlocked Gear System Header - AT BOTTOM */
  .gear-header{
    text-align:center;margin-top:32px;padding:20px;
    background:linear-gradient(135deg,#f0f9ff,#e0f2fe);
    border:2px solid #0ea5e9;border-radius:12px;
    box-shadow:0 4px 12px rgba(14,165,233,0.2);
  }
  .gear-header h2{
    margin:0 0 8px 0;color:#0369a1;font-size:20px;font-weight:700;
    display:flex;align-items:center;justify-content:center;gap:8px;
  }
  .gear-header p{
    margin:0;color:#0c4a6e;line-height:1.5;font-size:14px;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .form-sections{grid-template-columns:1fr;}
    .service-grid{grid-template-columns:repeat(2, 1fr);}
    .engine-area{grid-template-columns:1fr;}
    .artifact-area{grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));}
    h1{font-size:24px;}
    .wrap{padding:16px;}
    .engine-controls{flex-direction:row;flex-wrap:wrap;}
  }
</style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Automation Demystified — The Hidden Engine</h1>
      <div class="sub">Discover what really happens when you click "automate" - peek inside the black box to see the hidden complexity that creates multiple valuable outputs from a single action.</div>
    </div>
  </header>

  <main class="wrap">
    <!-- Separated Personal vs Company Information -->
    <div class="form-sections">
      <!-- Personal Contact Information -->
      <div class="form-section">
        <h3 class="section-title">👤 Personal Contact Information</h3>
        <div class="form-grid">
          <div class="form-row">
            <div>
              <label>First Name</label>
              <input id="custFirst" placeholder="First name" value="Casey" />
            </div>
            <div>
              <label>Last Name</label>
              <input id="custLast" placeholder="Last name" value="Cooper" />
            </div>
          </div>
          <div>
            <label>Email Address</label>
            <input id="email" placeholder="Email" value="casey@example.com" />
          </div>
          <div>
            <label>Phone Number</label>
            <input id="phone" placeholder="Phone" value="330-555-0199" />
          </div>
        </div>
      </div>
      
      <!-- Company Information -->
      <div class="form-section">
        <h3 class="section-title">🏢 Company Information</h3>
        <div class="form-grid">
          <div>
            <label>Company Name</label>
            <input id="company" placeholder="Company" value="Cooper Services LLC" />
          </div>
          <div>
            <label>Service Address</label>
            <input id="address" placeholder="Service Address" value="903 W Main St, Alliance, OH" />
          </div>
        </div>
      </div>
    </div>

    <!-- Service Details - Full Width -->
    <div class="service-section">
      <h3 class="section-title">⚙️ Service Configuration</h3>
      <div class="service-grid">
        <div>
          <label>Service Type</label>
          <select id="service">
            <option>Drain Cleaning</option>
            <option>Water Heater Install</option>
            <option>General Plumbing Repair</option>
            <option>Annual Maintenance</option>
            <option>Emergency Service</option>
            <option>Pipe Inspection</option>
          </select>
        </div>
        <div>
          <label>Priority Level</label>
          <select id="priority">
            <option>Normal</option>
            <option>High</option>
            <option>Urgent</option>
            <option>Emergency</option>
          </select>
        </div>
        <div>
          <label>Quantity/Hours</label>
          <input id="qty" type="number" min="1" value="2" placeholder="Qty/Hrs" />
        </div>
        <div>
          <label>Rate ($)</label>
          <input id="rate" type="number" min="0" value="125" placeholder="Rate ($)" />
        </div>
      </div>
      <div class="address-section">
        <label>Service Date</label>
        <input id="date" type="date" style="max-width:200px;" />
      </div>
    </div>

    <!-- Engine Area with Matching Widths -->
    <section class="panel">
      <div class="engine-area">
        <!-- Engine Section with Buttons on Left -->
        <div class="engine-section">
          <div class="engine-controls">
            <button class="primary" id="startEngine">🔍 Peek Inside</button>
            <button class="stop" id="stopEngine" style="display:none">⏹️ Stop</button>
            <button class="secondary" id="resetEngine">🔄 Reset</button>
          </div>
          <svg id="gearEngine" viewBox="0 0 400 400"></svg>
        </div>
        
        <!-- Work Products Section -->
        <div class="products-section">
          <h3 class="products-title">Hidden Work Products</h3>
          <div class="status-message" id="statusMessage">
            Click "Peek Inside" to reveal what automation creates behind the scenes
          </div>
          <div class="artifact-area" id="artifactArea">
            <div class="artifact-pill artifact-email" data-type="Email">
              <div class="icon">📧</div>
              <div class="title">Email</div>
              <div class="desc">Professional customer communication</div>
            </div>
            <div class="artifact-pill artifact-sms" data-type="SMS">
              <div class="icon">📱</div>
              <div class="title">SMS</div>
              <div class="desc">Mobile notifications & updates</div>
            </div>
            <div class="artifact-pill artifact-invoice" data-type="Invoice">
              <div class="icon">🧾</div>
              <div class="title">Invoice</div>
              <div class="desc">Financial billing document</div>
            </div>
            <div class="artifact-pill artifact-crm" data-type="CRM">
              <div class="icon">👥</div>
              <div class="title">CRM Entry</div>
              <div class="desc">Customer relationship data</div>
            </div>
            <div class="artifact-pill artifact-slack" data-type="Slack">
              <div class="icon">💬</div>
              <div class="title">Slack Alert</div>
              <div class="desc">Team collaboration message</div>
            </div>
            <div class="artifact-pill artifact-response" data-type="Response">
              <div class="icon">🔄</div>
              <div class="title">API Response</div>
              <div class="desc">Partner system integration</div>
            </div>
            <div class="artifact-pill artifact-report" data-type="Report">
              <div class="icon">📊</div>
              <div class="title">Analytics</div>
              <div class="desc">Business intelligence report</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Interlocked Gear System Header - AT BOTTOM -->
    <div class="gear-header">
      <h2>🔍 The Hidden Engine Revealed</h2>
      <p>What you just witnessed is the hidden complexity behind automation's apparent simplicity. One simple action triggered a sophisticated mechanical process that simultaneously created seven different valuable business outputs - most of which remain invisible to users in typical automation platforms.</p>
    </div>
  </main>

  <!-- Modal for artifact details -->
  <div class="modal" id="artifactModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Artifact Details</h3>
        <button class="modal-close" id="modalClose">✕</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- Empowerment Modal - Appears during gear animation -->
  <div class="empowerment-modal" id="empowermentModal">
    <div class="empowerment-content">
      <div class="empowerment-title">One trigger produces ALL of THIS</div>
      <div class="empowerment-message">
        Your 'agent' delivers all of these results from one action
      </div>
      <div class="empowerment-highlight">
        Your agent never sleeps. Dread tasks no more. Constant, flawless, and error free work happens 24/7 without exception.
      </div>
    </div>
  </div>

<script>
// ===== State Management =====
var state = {
  first:'Casey', last:'Cooper', company:'Cooper Services LLC', email:'casey@example.com', phone:'330-555-0199',
  service:'Drain Cleaning', priority:'Normal', qty:2, rate:125, date:'', address:'903 W Main St, Alliance, OH',
  isRunning: false, isRevealed: false
};

function $(id){return document.getElementById(id)}
function fmtCurrency(n){return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(n)}
function todayISO(){
  var d=new Date(); 
  var z=function(n){return String(n).padStart(2,'0')}; 
  return d.getFullYear()+"-"+z(d.getMonth()+1)+"-"+z(d.getDate())
}
$('date').value = todayISO();

function readForm(){
  state.first=$('custFirst').value||''; state.last=$('custLast').value||''; state.company=$('company').value||'';
  state.email=$('email').value||''; state.phone=$('phone').value||''; state.service=$('service').value; state.priority=$('priority').value;
  state.qty=parseFloat($('qty').value||'0'); state.rate=parseFloat($('rate').value||'0'); 
  state.date=$('date').value||todayISO(); state.address=$('address').value||'';
}

// ===== Interlocked Gear System =====
var gearSvg = $('gearEngine');

function createGear(cx, cy, radius, teeth, color, id) {
  var gear = document.createElementNS('http://www.w3.org/2000/svg','g');
  gear.setAttribute('id', id);
  gear.setAttribute('class', 'gear');
  
  // Create gear teeth path
  var path = '';
  var angleStep = (2 * Math.PI) / teeth;
  var innerRadius = radius * 0.75;
  var outerRadius = radius;
  
  for (var i = 0; i < teeth; i++) {
    var angle1 = i * angleStep;
    var angle2 = (i + 0.3) * angleStep;
    var angle3 = (i + 0.7) * angleStep;
    var angle4 = (i + 1) * angleStep;
    
    var x1 = cx + Math.cos(angle1) * innerRadius;
    var y1 = cy + Math.sin(angle1) * innerRadius;
    var x2 = cx + Math.cos(angle2) * outerRadius;
    var y2 = cy + Math.sin(angle2) * outerRadius;
    var x3 = cx + Math.cos(angle3) * outerRadius;
    var y3 = cy + Math.sin(angle3) * outerRadius;
    var x4 = cx + Math.cos(angle4) * innerRadius;
    var y4 = cy + Math.sin(angle4) * innerRadius;
    
    if (i === 0) {
      path += 'M ' + x1 + ' ' + y1;
    }
    path += ' L ' + x2 + ' ' + y2 + ' L ' + x3 + ' ' + y3 + ' L ' + x4 + ' ' + y4;
  }
  path += ' Z';
  
  var gearPath = document.createElementNS('http://www.w3.org/2000/svg','path');
  gearPath.setAttribute('d', path);
  gearPath.setAttribute('fill', color);
  gearPath.setAttribute('stroke', '#ffffff');
  gearPath.setAttribute('stroke-width', '2');
  
  // Center circle
  var center = document.createElementNS('http://www.w3.org/2000/svg','circle');
  center.setAttribute('cx', cx);
  center.setAttribute('cy', cy);
  center.setAttribute('r', radius * 0.25);
  center.setAttribute('fill', '#ffffff');
  center.setAttribute('stroke', color);
  center.setAttribute('stroke-width', '2');
  
  gear.appendChild(gearPath);
  gear.appendChild(center);
  
  return gear;
}

function buildInterlockedGears() {
  gearSvg.innerHTML = '';
  
  // Create gradient definitions
  var defs = document.createElementNS('http://www.w3.org/2000/svg','defs');
  var gradient = document.createElementNS('http://www.w3.org/2000/svg','linearGradient');
  gradient.setAttribute('id','mainGradient');
  gradient.setAttribute('x1','0%');
  gradient.setAttribute('y1','0%');
  gradient.setAttribute('x2','100%');
  gradient.setAttribute('y2','100%');
  
  var stop1 = document.createElementNS('http://www.w3.org/2000/svg','stop');
  stop1.setAttribute('offset','0%');
  stop1.setAttribute('stop-color','#6366f1');
  
  var stop2 = document.createElementNS('http://www.w3.org/2000/svg','stop');
  stop2.setAttribute('offset','100%');
  stop2.setAttribute('stop-color','#3b82f6');
  
  gradient.appendChild(stop1);
  gradient.appendChild(stop2);
  defs.appendChild(gradient);
  gearSvg.appendChild(defs);
  
  // Main driving gear (larger, center-left)
  var mainGear = createGear(120, 200, 50, 16, 'url(#mainGradient)', 'mainGear');
  gearSvg.appendChild(mainGear);
  
  // Add "ENGINE" text
  var engineText = document.createElementNS('http://www.w3.org/2000/svg','text');
  engineText.setAttribute('x', '120');
  engineText.setAttribute('y', '205');
  engineText.setAttribute('text-anchor', 'middle');
  engineText.setAttribute('fill', '#ffffff');
  engineText.setAttribute('font-size', '10');
  engineText.setAttribute('font-weight', 'bold');
  engineText.textContent = 'ENGINE';
  gearSvg.appendChild(engineText);
  
  // Interlocked gears positioned close together
  var gears = [
    {id: 'gear1', x: 200, y: 130, r: 30, teeth: 12, color: '#3b82f6', reverse: true},
    {id: 'gear2', x: 200, y: 270, r: 30, teeth: 12, color: '#10b981', reverse: true},
    {id: 'gear3', x: 260, y: 90, r: 25, teeth: 10, color: '#f59e0b', reverse: false},
    {id: 'gear4', x: 260, y: 170, r: 25, teeth: 10, color: '#8b5cf6', reverse: false},
    {id: 'gear5', x: 260, y: 230, r: 25, teeth: 10, color: '#06b6d4', reverse: false},
    {id: 'gear6', x: 260, y: 310, r: 25, teeth: 10, color: '#ec4899', reverse: false},
    {id: 'gear7', x: 320, y: 200, r: 30, teeth: 12, color: '#ef4444', reverse: true}
  ];
  
  gears.forEach(function(g) {
    var gear = createGear(g.x, g.y, g.r, g.teeth, g.color, g.id);
    if (g.reverse) gear.classList.add('reverse');
    gearSvg.appendChild(gear);
  });
  
  // Connection lines showing mechanical linkage
  var connections = [
    {from: [120, 200], to: [200, 130]},
    {from: [120, 200], to: [200, 270]},
    {from: [200, 130], to: [260, 90]},
    {from: [200, 130], to: [260, 170]},
    {from: [200, 270], to: [260, 230]},
    {from: [200, 270], to: [260, 310]},
    {from: [260, 170], to: [320, 200]},
    {from: [260, 230], to: [320, 200]}
  ];
  
  connections.forEach(function(conn) {
    var line = document.createElementNS('http://www.w3.org/2000/svg','line');
    line.setAttribute('x1', conn.from[0]);
    line.setAttribute('y1', conn.from[1]);
    line.setAttribute('x2', conn.to[0]);
    line.setAttribute('y2', conn.to[1]);
    line.setAttribute('stroke', '#cbd5e1');
    line.setAttribute('stroke-width', '2');
    line.setAttribute('stroke-dasharray', '4,4');
    line.setAttribute('opacity', '0.6');
    gearSvg.appendChild(line);
  });
}

// ===== The Enhanced "Aha Moment" Engine with Empowerment Modal =====
function peekInside() {
  if (state.isRunning) return;
  
  readForm();
  state.isRunning = true;
  
  $('startEngine').style.display = 'none';
  $('stopEngine').style.display = 'inline-block';
  
  // Update status to show work is happening
  var statusMsg = $('statusMessage');
  statusMsg.textContent = 'Hidden engine working... creating multiple outputs from your single action';
  statusMsg.classList.add('working');
  
  // Start all gears spinning slowly - showing mysterious work
  var allGears = gearSvg.querySelectorAll('.gear');
  allGears.forEach(function(gear) {
    gear.classList.add('spinning');
  });
  
  // After 3 seconds, show the empowerment modal
  setTimeout(function() {
    showEmpowermentModal();
  }, 3000);
  
  // After 18 seconds total (3 + 15), hide modal and reveal outputs
  setTimeout(function() {
    hideEmpowermentModal();
    // Small delay to let modal fade out, then reveal outputs
    setTimeout(function() {
      revealAllOutputs();
    }, 800);
  }, 18000);
}

function showEmpowermentModal() {
  var modal = $('empowermentModal');
  modal.classList.add('active');
  modal.classList.add('fade-in');
}

function hideEmpowermentModal() {
  var modal = $('empowermentModal');
  modal.classList.add('fade-out');
  setTimeout(function() {
    modal.classList.remove('active', 'fade-in', 'fade-out');
  }, 800);
}

function revealAllOutputs() {
  // Stop the working status
  var statusMsg = $('statusMessage');
  statusMsg.textContent = 'Revelation: Your single action created ALL of these valuable outputs!';
  statusMsg.classList.remove('working');
  
  // Reveal ALL artifacts simultaneously - NO animations, NO sequences
  var artifacts = document.querySelectorAll('.artifact-pill');
  artifacts.forEach(function(pill) {
    pill.classList.add('revealed');
  });
  
  state.isRevealed = true;
  
  // Update status after revelation
  setTimeout(function() {
    statusMsg.textContent = 'Click any output to see the actual work product created';
  }, 3000);
}

function stopEngine() {
  if (!state.isRunning) return;
  
  state.isRunning = false;
  
  $('startEngine').style.display = 'inline-block';
  $('stopEngine').style.display = 'none';
  
  // Hide empowerment modal if it's showing
  var empModal = $('empowermentModal');
  empModal.classList.remove('active', 'fade-in', 'fade-out');
  
  // Stop all gears
  var allGears = gearSvg.querySelectorAll('.gear');
  allGears.forEach(function(gear) {
    gear.classList.remove('spinning');
  });
  
  // Update status
  var statusMsg = $('statusMessage');
  statusMsg.textContent = 'Engine stopped. Click "Peek Inside" to see the hidden complexity again.';
  statusMsg.classList.remove('working');
}

function resetEngine() {
  stopEngine();
  state.isRevealed = false;
  
  // Hide empowerment modal
  var empModal = $('empowermentModal');
  empModal.classList.remove('active', 'fade-in', 'fade-out');
  
  // Hide all artifacts
  var artifacts = document.querySelectorAll('.artifact-pill');
  artifacts.forEach(function(pill) {
    pill.classList.remove('revealed');
  });
  
  // Reset status
  var statusMsg = $('statusMessage');
  statusMsg.textContent = 'Click "Peek Inside" to reveal what automation creates behind the scenes';
  statusMsg.classList.remove('working');
}

// ===== Clean Artifact Content Renderers =====
function getCleanArtifactContent(type) {
  switch(type) {
    case 'Email': return renderCleanEmailContent();
    case 'SMS': return renderCleanSMSContent();
    case 'Invoice': return renderCleanInvoiceContent();
    case 'CRM': return renderCleanCRMContent();
    case 'Slack': return renderCleanSlackContent();
    case 'Response': return renderCleanResponseContent();
    case 'Report': return renderCleanReportContent();
    default: return '';
  }
}

function renderCleanEmailContent(){
  var total=state.qty*state.rate;
  var subj='Service Confirmation: '+state.service+' - '+state.date;
  return `
    <div style="background:linear-gradient(135deg,#dbeafe,#f0f9ff);border:2px solid #3b82f6;border-radius:12px;padding:20px;max-width:500px;">
      <div style="display:grid;grid-template-columns:80px 1fr;gap:12px;margin-bottom:16px;font-size:13px;">
        <div style="font-weight:600;color:#1d4ed8;">To:</div><div>${state.email}</div>
        <div style="font-weight:600;color:#1d4ed8;">From:</div><div>service@cooperservices.com</div>
        <div style="font-weight:600;color:#1d4ed8;">Subject:</div><div style="font-weight:600;">${subj}</div>
      </div>
      <div style="background:white;padding:20px;border-radius:8px;line-height:1.6;">
        <p>Dear ${state.first} ${state.last},</p>
        <p>Thank you for scheduling <strong>${state.service.toLowerCase()}</strong> service with us.</p>
        <div style="background:#f0f9ff;padding:12px;border-radius:6px;margin:16px 0;">
          <strong>📅 Service Details:</strong><br>
          • Date: ${state.date}<br>
          • Address: ${state.address}<br>
          • Priority: ${state.priority}<br>
          • Estimated Cost: ${fmtCurrency(total)}
        </div>
        <p>We will send SMS updates to ${state.phone} and email confirmations throughout the process.</p>
        <p>Best regards,<br><strong>Professional Service Team</strong></p>
      </div>
    </div>
  `;
}

function renderCleanSMSContent(){
  var total=fmtCurrency(state.qty*state.rate);
  return `
    <div style="background:linear-gradient(135deg,#d1fae5,#ecfdf5);border:2px solid #10b981;border-radius:12px;padding:20px;max-width:400px;">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
        <div style="width:32px;height:32px;background:#10b981;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:16px;">📱</div>
        <div>
          <div style="font-weight:700;color:#047857;">SMS Notification Sequence</div>
          <div style="font-size:12px;color:#065f46;">To: ${state.phone}</div>
        </div>
      </div>
      <div style="space-y:12px;">
        <div style="background:#10b981;color:white;padding:12px 16px;border-radius:18px 18px 6px 18px;margin:8px 0;max-width:280px;">
          Hi ${state.first}! Your ${state.service.toLowerCase()} is confirmed for ${state.date}. Est: ${total}. We'll text ETA updates. - Service Team
        </div>
        <div style="background:#059669;color:white;padding:12px 16px;border-radius:18px 18px 6px 18px;margin:8px 0;max-width:280px;">
          Update: Technician en route! ETA: 15-20 min. Service: ${state.service}. Questions? Call (330) 555-0100
        </div>
        <div style="background:#047857;color:white;padding:12px 16px;border-radius:18px 18px 6px 18px;margin:8px 0;max-width:280px;">
          ✅ Service complete! ${state.service} finished. Invoice sent to ${state.email}. Rate us: bit.ly/review
        </div>
      </div>
    </div>
  `;
}

function renderCleanInvoiceContent(){
  var subtotal=state.qty*state.rate; 
  var tax=+(subtotal*0.0725).toFixed(2); 
  var total=subtotal+tax;
  var invoiceNum = 'INV-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random()*9999)).padStart(4,'0');
  
  return `
    <div style="background:linear-gradient(135deg,#fef3c7,#fffbeb);border:2px solid #f59e0b;border-radius:12px;padding:20px;max-width:500px;">
      <div style="text-align:center;margin-bottom:20px;">
        <h3 style="margin:0;color:#d97706;font-size:24px;">INVOICE</h3>
        <div style="color:#92400e;font-size:14px;">${invoiceNum}</div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;font-size:13px;">
        <div>
          <strong style="color:#d97706;">Bill To:</strong><br>
          ${state.first} ${state.last}<br>
          ${state.company}<br>
          ${state.email}
        </div>
        <div>
          <strong style="color:#d97706;">Service Date:</strong><br>
          ${state.date}<br><br>
          <strong style="color:#d97706;">Priority:</strong> ${state.priority}
        </div>
      </div>
      <table style="width:100%;border-collapse:collapse;margin:16px 0;font-size:13px;">
        <thead>
          <tr style="background:#f59e0b;color:white;">
            <th style="padding:8px;text-align:left;">Service</th>
            <th style="padding:8px;text-align:center;">Qty</th>
            <th style="padding:8px;text-align:right;">Rate</th>
            <th style="padding:8px;text-align:right;">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr style="background:white;">
            <td style="padding:8px;border:1px solid #fbbf24;">${state.service}</td>
            <td style="padding:8px;border:1px solid #fbbf24;text-align:center;">${state.qty}</td>
            <td style="padding:8px;border:1px solid #fbbf24;text-align:right;">${fmtCurrency(state.rate)}</td>
            <td style="padding:8px;border:1px solid #fbbf24;text-align:right;">${fmtCurrency(subtotal)}</td>
          </tr>
        </tbody>
      </table>
      <div style="text-align:right;font-size:14px;">
        <div>Subtotal: ${fmtCurrency(subtotal)}</div>
        <div>Tax (7.25%): ${fmtCurrency(tax)}</div>
        <div style="font-weight:bold;font-size:16px;color:#d97706;border-top:2px solid #f59e0b;padding-top:8px;margin-top:8px;">
          Total: ${fmtCurrency(total)}
        </div>
      </div>
    </div>
  `;
}

function renderCleanCRMContent(){
  var total = fmtCurrency(state.qty*state.rate);
  var score = Math.floor(Math.random()*30) + 70;
  
  return `
    <div style="background:linear-gradient(135deg,#ede9fe,#f5f3ff);border:2px solid #8b5cf6;border-radius:12px;padding:20px;max-width:500px;">
      <div style="text-align:center;margin-bottom:20px;">
        <h3 style="margin:0;color:#7c3aed;font-size:20px;">👥 CUSTOMER RECORD</h3>
        <div style="color:#6d28d9;font-size:12px;">Customer Relationship Management</div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
        <div style="background:white;padding:16px;border-radius:8px;">
          <div style="font-weight:bold;color:#7c3aed;margin-bottom:8px;">Customer Profile</div>
          <div style="font-size:13px;line-height:1.5;">
            <strong>Name:</strong> ${state.first} ${state.last}<br>
            <strong>Company:</strong> ${state.company}<br>
            <strong>Email:</strong> ${state.email}<br>
            <strong>Phone:</strong> ${state.phone}<br>
            <strong>Score:</strong> <span style="color:#10b981;font-weight:bold;">${score}/100</span>
          </div>
        </div>
        <div style="background:white;padding:16px;border-radius:8px;">
          <div style="font-weight:bold;color:#7c3aed;margin-bottom:8px;">Service Record</div>
          <div style="font-size:13px;line-height:1.5;">
            <strong>Service:</strong> ${state.service}<br>
            <strong>Date:</strong> ${state.date}<br>
            <strong>Priority:</strong> ${state.priority}<br>
            <strong>Value:</strong> ${total}<br>
            <strong>Status:</strong> <span style="background:#d1fae5;color:#047857;padding:2px 6px;border-radius:4px;font-size:11px;">Active</span>
          </div>
        </div>
      </div>
    </div>
  `;
}

function renderCleanSlackContent(){
  var total=fmtCurrency(state.qty*state.rate);
  
  return `
    <div style="background:linear-gradient(135deg,#cffafe,#f0fdfa);border:2px solid #06b6d4;border-radius:12px;padding:20px;max-width:500px;">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
        <div style="background:#06b6d4;color:white;padding:6px 12px;border-radius:6px;font-size:12px;font-weight:bold;">#service-alerts</div>
        <div style="font-size:11px;color:#0891b2;">${new Date().toLocaleTimeString()}</div>
      </div>
      <div style="display:flex;gap:12px;">
        <div style="width:36px;height:36px;background:#06b6d4;border-radius:8px;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:14px;">🤖</div>
        <div style="flex:1;">
          <div style="font-weight:bold;color:#0891b2;margin-bottom:4px;">Service Bot</div>
          <div style="background:white;padding:12px;border-radius:8px;border-left:4px solid #06b6d4;">
            <div style="font-weight:bold;margin-bottom:8px;">🚀 New Service Scheduled</div>
            <div style="font-size:13px;line-height:1.4;">
              <strong>Customer:</strong> ${state.company}<br>
              <strong>Service:</strong> ${state.service}<br>
              <strong>Date:</strong> ${state.date}<br>
              <strong>Value:</strong> ${total}<br>
              <strong>Priority:</strong> ${state.priority}
            </div>
            <div style="margin-top:8px;font-size:12px;color:#0891b2;">
              ✅ Email sent • 📱 SMS queued • 🧾 Invoice generated • 👥 CRM updated
            </div>
          </div>
        </div>
      </div>
    </div>
  `;
}

function renderCleanResponseContent(){
  var total=fmtCurrency(state.qty*state.rate);
  var partners = ['TechFlow Systems', 'ServiceLink Pro', 'AutomateNow Corp'];
  var partner = partners[Math.floor(Math.random()*partners.length)];
  var refNum = 'REF-' + new Date().getFullYear() + String(Math.floor(Math.random()*9999)).padStart(4,'0');
  
  return `
    <div style="background:linear-gradient(135deg,#fce7f3,#fdf2f8);border:2px solid #ec4899;border-radius:12px;padding:20px;max-width:500px;">
      <div style="text-align:center;margin-bottom:16px;">
        <h3 style="margin:0;color:#db2777;font-size:18px;">🔄 API RESPONSE</h3>
        <div style="color:#be185d;font-size:12px;">Partner System Integration</div>
      </div>
      <div style="background:white;padding:16px;border-radius:8px;border-left:4px solid #ec4899;">
        <div style="font-size:12px;color:#be185d;margin-bottom:8px;">Response to: <strong>${partner}</strong></div>
        <div style="font-weight:bold;margin-bottom:12px;color:#db2777;">Service Booking Confirmation</div>
        <div style="font-size:13px;line-height:1.5;">
          Dear ${partner} Team,<br><br>
          Confirmation of new service booking:<br><br>
          <strong>Reference:</strong> ${refNum}<br>
          <strong>Customer:</strong> ${state.company}<br>
          <strong>Service:</strong> ${state.service}<br>
          <strong>Date:</strong> ${state.date}<br>
          <strong>Value:</strong> ${total}<br>
          <strong>Priority:</strong> ${state.priority}<br><br>
          All documentation generated. Customer notifications in progress.<br><br>
          <em>Service Platform</em>
        </div>
      </div>
      <div style="margin-top:12px;text-align:right;font-size:11px;color:#be185d;">
        ✅ Sent successfully • ${new Date().toLocaleString()}
      </div>
    </div>
  `;
}

function renderCleanReportContent(){
  var total=fmtCurrency(state.qty*state.rate);
  var reportId = 'RPT-' + new Date().toISOString().slice(0,10).replace(/-/g,'');
  
  return `
    <div style="background:linear-gradient(135deg,#fee2e2,#fef2f2);border:2px solid #ef4444;border-radius:12px;padding:20px;max-width:500px;">
      <div style="text-align:center;margin-bottom:20px;">
        <h3 style="margin:0;color:#dc2626;font-size:20px;">📊 ANALYTICS REPORT</h3>
        <div style="color:#b91c1c;font-size:12px;">${reportId}</div>
      </div>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px;">
        <div style="background:white;padding:12px;border-radius:8px;text-align:center;">
          <div style="font-size:20px;font-weight:bold;color:#10b981;">1</div>
          <div style="font-size:11px;color:#dc2626;">Services Today</div>
        </div>
        <div style="background:white;padding:12px;border-radius:8px;text-align:center;">
          <div style="font-size:20px;font-weight:bold;color:#3b82f6;">${total}</div>
          <div style="font-size:11px;color:#dc2626;">Revenue</div>
        </div>
        <div style="background:white;padding:12px;border-radius:8px;text-align:center;">
          <div style="font-size:20px;font-weight:bold;color:#f59e0b;">100%</div>
          <div style="font-size:11px;color:#dc2626;">Processed</div>
        </div>
      </div>
      <div style="background:white;padding:12px;border-radius:8px;">
        <table style="width:100%;font-size:12px;">
          <thead>
            <tr style="background:#fee2e2;">
              <th style="padding:6px;text-align:left;color:#dc2626;">Customer</th>
              <th style="padding:6px;text-align:left;color:#dc2626;">Service</th>
              <th style="padding:6px;text-align:right;color:#dc2626;">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:6px;">${state.company}</td>
              <td style="padding:6px;">${state.service}</td>
              <td style="padding:6px;text-align:right;font-weight:bold;">${total}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div style="margin-top:12px;padding:8px;background:#fef2f2;border-radius:6px;font-size:11px;color:#b91c1c;">
        <strong>Summary:</strong> All touchpoints processed. Zero manual intervention required.
      </div>
    </div>
  `;
}

// ===== Enhanced Modal Renderers (WITH educational content BELOW artifacts) =====
function renderEmail(){
  return renderCleanEmailContent() + `
    <div class="education-section">
      <h4>📧 Professional Email Communication</h4>
      <p><strong>What it is:</strong> A professional email sent to the customer confirming their service appointment.</p>
      <p><strong>Data reused:</strong> Customer name, contact info, service details, pricing, and scheduling data from the original form are automatically populated into a professional email template.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Immediate customer confirmation reduces anxiety and builds trust</li>
          <li>Professional appearance enhances brand reputation</li>
          <li>Eliminates manual email writing, saving 5-10 minutes per booking</li>
          <li>Consistent messaging ensures no important details are forgotten</li>
          <li>Creates paper trail for customer service and billing</li>
        </ul>
      </div>
    </div>
  `;
}

function renderSMS(){
  return renderCleanSMSContent() + `
    <div class="education-section">
      <h4>📱 Mobile SMS Notification Sequence</h4>
      <p><strong>What it is:</strong> A series of text messages sent to the customer's mobile phone at key stages of the service process.</p>
      <p><strong>Data reused:</strong> Customer phone number, name, service type, date, pricing, and address are automatically inserted into pre-written SMS templates.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Real-time updates keep customers informed and reduce anxiety</li>
          <li>Reduces "where is my technician?" phone calls by 80%</li>
          <li>Improves customer satisfaction through proactive communication</li>
          <li>Builds trust through transparency and reliability</li>
          <li>Encourages reviews and repeat business through completion messages</li>
        </ul>
      </div>
    </div>
  `;
}

function renderInvoice(){
  return renderCleanInvoiceContent() + `
    <div class="education-section">
      <h4>🧾 Financial Invoice</h4>
      <p><strong>What it is:</strong> A professional, legally-compliant invoice with all service details, pricing calculations, and tax computations.</p>
      <p><strong>Data reused:</strong> All customer information, service details, quantities, rates, and addresses are pulled from the original booking to create a complete billing document.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Eliminates manual invoice creation, saving 15-20 minutes per job</li>
          <li>Ensures accurate calculations and reduces billing errors</li>
          <li>Professional appearance improves payment rates</li>
          <li>Numbering and record-keeping for accounting</li>
          <li>Faster payment processing leads to improved cash flow</li>
        </ul>
      </div>
    </div>
  `;
}

function renderCRM(){
  return renderCleanCRMContent() + `
    <div class="education-section">
      <h4>👥 Customer Relationship Management Entry</h4>
      <p><strong>What it is:</strong> A comprehensive customer record created in the CRM system with all relevant customer data, service history, and relationship scoring.</p>
      <p><strong>Data reused:</strong> Customer contact information, company details, service preferences, and transaction data are organized into a structured CRM profile.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Builds comprehensive customer database for future marketing</li>
          <li>Enables personalized service based on history and preferences</li>
          <li>Tracks customer lifetime value and service patterns</li>
          <li>Improves customer retention through better relationship management</li>
          <li>Provides data for business intelligence and growth planning</li>
        </ul>
      </div>
    </div>
  `;
}

function renderSlack(){
  return renderCleanSlackContent() + `
    <div class="education-section">
      <h4>💬 Team Collaboration Alert</h4>
      <p><strong>What it is:</strong> A message sent to the team's Slack channel to notify all relevant staff about the new service booking and its details.</p>
      <p><strong>Data reused:</strong> All booking information is formatted into a team-friendly message that keeps everyone informed about new work and customer priorities.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Keeps entire team informed about new bookings instantly</li>
          <li>Enables quick coordination and resource allocation</li>
          <li>Reduces communication gaps between departments</li>
          <li>Allows for proactive planning and scheduling adjustments</li>
          <li>Creates transparency and accountability across the organization</li>
        </ul>
      </div>
    </div>
  `;
}

function renderResponse(){
  return renderCleanResponseContent() + `
    <div class="education-section">
      <h4>🔄 Partner System Integration Response</h4>
      <p><strong>What it is:</strong> A response sent to partner companies or third-party systems to notify them of the new booking and coordinate any necessary actions.</p>
      <p><strong>Data reused:</strong> Booking details are formatted and transmitted to partner systems using their required data formats and protocols.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Seamless integration with supplier and partner networks</li>
          <li>Coordination reduces manual communication overhead</li>
          <li>Ensures all stakeholders have real-time booking information</li>
          <li>Enables complex multi-vendor service delivery</li>
          <li>Creates audit trail for partner accountability and billing</li>
        </ul>
      </div>
    </div>
  `;
}

function renderReport(){
  return renderCleanReportContent() + `
    <div class="education-section">
      <h4>📊 Business Intelligence Analytics</h4>
      <p><strong>What it is:</strong> A business report that aggregates booking data into actionable insights for management decision-making and performance tracking.</p>
      <p><strong>Data reused:</strong> All transaction data is analyzed and compiled into charts, metrics, and summaries that reveal business trends and opportunities.</p>
      <div class="value-points">
        <strong>Business Value Added:</strong>
        <ul>
          <li>Real-time business performance monitoring and insights</li>
          <li>Identifies trends and opportunities for growth</li>
          <li>Enables data-driven decision making</li>
          <li>Tracks efficiency gains and ROI</li>
          <li>Provides executive dashboards for strategic planning</li>
        </ul>
      </div>
    </div>
  `;
}

var renderers = { 
  Email: renderEmail, 
  SMS: renderSMS,
  Invoice: renderInvoice, 
  CRM: renderCRM, 
  Slack: renderSlack, 
  Response: renderResponse,
  Report: renderReport 
};

// ===== Modal System =====
var modal = $('artifactModal');
var modalTitle = $('modalTitle');
var modalBody = $('modalBody');

function openArtifactModal(type) {
  readForm();
  modalTitle.textContent = type + ' — Detailed View';
  modalBody.innerHTML = renderers[type]();
  modal.classList.add('active');
}

function closeArtifactModal() {
  modal.classList.remove('active');
}

// ===== Event Listeners =====
$('startEngine').addEventListener('click', peekInside);
$('stopEngine').addEventListener('click', stopEngine);
$('resetEngine').addEventListener('click', resetEngine);
$('modalClose').addEventListener('click', closeArtifactModal);

// Click outside modal to close
modal.addEventListener('click', function(e) {
  if (e.target === modal) closeArtifactModal();
});

// Artifact click handlers
document.querySelectorAll('.artifact-pill').forEach(function(pill) {
  pill.addEventListener('click', function() {
    var type = this.dataset.type;
    openArtifactModal(type);
  });
});

// ===== Initialize =====
document.addEventListener('DOMContentLoaded', function() {
  buildInterlockedGears();
  readForm();
});
</script>
</body>
</html>

